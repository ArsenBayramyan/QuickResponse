 @model PostCreateModel
@{
    ViewBag.Title = "PostCreate";
    Layout = "_Layout";
}
@*<div class="text-danger" asp-validation-summary="All"></div>*@
    <div class="form-group">
        <label asp-for="PostName"></label>
        <div><span asp-validation-for="PostName" class="text-danger"></span></div>
        <input asp-for="PostName" class="form-control" id="postName" />
    </div>
    <div class="form-group">
        <label asp-for="PostType">Post type</label>
        <select class="mdb-select md-form" id="postType">
            <option value="" disabled selected>Choose your option</option>
            <option value="LookingFor">Looking for</option>
            <option value="ForSale">For sale</option>
        </select>
    </div>
    <div class="form-group">
        <label asp-for="Count"></label>
        <div><span asp-validation-for="Count" class="text-danger"></span></div>
        <input asp-for="Count" class="form-control" id="count" />
    </div>
    <div class="form-group">
        <label asp-for="Price"></label>
        <div><span asp-validation-for="Price" class="text-danger"></span></div>
        <input asp-for="Price" class="form-control" id="price" />
    </div>
    <div class="form-group">
        <label asp-for="Body"></label>
        <div><span asp-validation-for="Body" class="text-danger"></span></div>
        <input asp-for="Body" class="form-control" id="body" />
    </div>
    <div class="form-group">
        <label asp-for="ProductTypeId">Product type</label>
        <select class="form-control" id="productTypeId">
            @foreach (var type in Model.ProductTypes)
            {
                <option value="@type.ProductTypeId">@type.ProductTypeName</option>
            }
        </select>

        <div class="mb-2" id="create">
            <button onclick="create()" class="btn btn-success mb-2">+</button>
        </div>


    </div>
    <div>
        <button class="btn btn-success" onclick="add()">Add</button>
    </div>

<script>
    function create() {
        window.$.ajax({
            type: "Get",
            url: "/Product/CreateProduct",
            success: function (data) {
                $('#create').html(data);
            },
            failure: function (errMsg) {
                alert(errMsg);
            }
        });
    }

    function add() {
        console.log("hey")
        let postName = $('#postName').val();
        let productTypeId = $('#productTypeId').val();
        let postType = $('#postType').val();
        let count = $('#count').val();
        let price = $('#price').val();
        let body = $('#body').val();
        $.ajax({
            url: "/Post/CreatePost",
            type: "POST",
            dataType: 'json',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            data: {
                PostName: postName,
                ProductTypeId: productTypeId,
                PostType: postType,
                Count: count,
                Price: price,
                Body: body,
            }
        });

    }
</script>

